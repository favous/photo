<!DOCTYPE html>
<!-- saved from url=(0046)http://zc.suning.com/myCF/showMyCF.htm#unknown -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>南京商业摄影,新蜂摄影</title>
<meta name="keywords" content="南京商业摄影,新蜂摄影" />
<meta name="description" content="南京商业摄影- 新蜂商业摄影-南京新锐摄影工作室，工作室拥有两百平米专业商业摄影棚，全画幅数码单反，红圈专业镜头， 完整的闪光灯系统，承接各类商业摄影，产品静物，珠宝摄影，服装画册，建筑摄影，空间摄影，样板房摄影， 淘宝摄影，美食菜谱摄影，图片后期等业务，新蜂服装客户的目标是：精确布光，完美呈现" />
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">

<script type="text/javascript" src="../lib/common/jquery-1.10.1.min.js"></script>
<script type="text/javascript" src="../lib/common/ajaxfileupload.js"></script>
<script type="text/javascript" src="../lib/common/ajaxfileuploadExt.js"></script>
<script type="text/javascript" src="../lib/common/jquery.jsonp.js"></script>
<script type="text/javascript" src="../lib/common/jquery.mousewheel-3.0.6.pack.js"></script>
<script type="text/javascript" src="../fancyBox/source/jquery.fancybox.js?v=2.1.5"></script>
<script type="text/javascript" src="../lib/common/common.js"></script>

<link rel="stylesheet" type="text/css" href="../fancyBox/source/jquery.fancybox.css?v=2.1.5" media="screen" />
<link rel='icon' href='../img/title.jpg' type=‘image/x-ico’ />

<style type="text/css">
body, button, input, select, textarea {
	font: 12px/1.5 'Microsoft Yahei', \5b8b\4f53
}
li, ol, ul {
	list-style: none
}
body, button, dd, dl, dt, fieldset, form, h1, h2, h3, h4, h5, h6, hr, input, legend, li, ol, p, td,
	textarea, th, ul {
	margin: 0;
	padding: 0
}
body {
	/* background-color: #F8F8FF; */
	background-color: #FFF;
}
.background{
	background: url(../img/main-bg2.png);
	background-size:cover; 
}
a {
	border: #333;
	text-decoration: none;
	cursor: pointer;
	outline: 0
}
img {
	border: none;
}
</style>

<!-- 左半菜单部分 -->
<style type="text/css">
.menu-header {;
	padding-left: 7%;
    width: 60%;	
}
.menu-weixin-scale {
    padding-top: 15px;
    position: relative;
	padding-left: 12%;
    width: 55%;	
    top:5%;
}
#menu-tail {
    position: absolute;
    bottom: 0%;
}
.menuArea {
	position: absolute;
	width: 228px;
	height:100%;
	z-index: 100;
}
.menu a {
	position: relative;
	line-height: 46px;
	height: 40px;
	font-size: 16px;
	color: #aaa;
	padding-left:15%;
	display: block;
	outline: 0
}
.menu a[class='menu-photo']:hover {
	color: rgb(243, 10, 53);
	font-size: 19px;
}
.text-show:hover {
	/* color: #719; */
	font-size: 18px;
	cursor:pointer;
}
.contactMe {
	font-size: 16px;
	padding-left:15%;
}
.line {
	padding-left:15%;
	font-size: 12px;
 	color: #aaa;
 	width: 77%;
}
#copyright {
	position: relative;
	left: 8%;
	font-size: 13px;
	color: gray;
}
</style>

<!-- 右半图片部分 -->
<style type="text/css">
#rigthPart {
	position: absolute;
	left: 17%;
	top: 5%;
	overflow: auto; 
	width:83%;
	height :90%;
}
#gallery {
	width:99%;
}
.column {
	padding-right: 20px;
	float: left;
	box-sizing: border-box;
	display: block;
}
.gallery-item {
	zoom: 1;
	opacity: 1;
	display: block;
}
.icon {
	padding-bottom: 20px;
	padding-right: 20px;
	height: auto;
	display: block;
}
.quer {
	width: 100%;
	padding-left: 20px;
	padding-bottom: 20px;
	box-sizing: border-box;
}
.gallery-item-h {
	zoom: 1;
	opacity: 1;
	float: left;
}
.icon-h {
	padding-bottom: 20px;
	padding-right: 15px;
	height: 200px;
	display: block;
}
</style>

<!-- 右边悬浮栏 -->
<style type="text/css">
#floatBar {
	position:fixed; 
    width: 75px;
	right: -42px;
	z-index:30; 
	top:300;  
    color: #FFF;
	font-size: 14px;
    font-weight: 700;
    text-align: left;
	padding-top:5px;
}
.barBlock {
	background-color: #AEB2BD;
	display:table;  
}
.barBlock img {
	width:33px;
}
.barBlock span{
	display:table-cell;
	vertical-align:middle; 
}
</style>

<!-- 上传图片层 -->
<style type="text/css">
#uploadPic {
	position:fixed; 
    display: none;
 	left: 3000px;
 	top:70px;
    width: 700px;
    height: 450px;
	z-index:999; 
    background: #EFEEFF;
    border: 1px solid CDCCDD;
}

.uploadItem {
    float: left;
    overflow: hidden;
	padding-top:45px;
	padding-left:20px;
    cursor: pointer;
	width: 150px;
  	height: 160px;
}
.selectMenu {
	top: -12px;
	position: relative;
	width:150px;
}
.uploadFile {
    position: absolute;
    z-index: 1000;
    display: block;
    width: 150px;
    height: 100px;
    font-size: 20px;
    opacity: 0;
    filter: alpha(opacity=0);
}

#uploadPic div[class~='uploadBotton'] {
    display: block;
    float: left;
    width: 150px;
    height: 100px;
    line-height: 100px;
    color: #fff;
    text-align: center;
    background: #CCDDFF;
}
</style>	

<script type="text/javascript">
		
	$(document).ready(function() {
		
		loadMenu();
		
		/* isTouch() || (window.onscroll = function() {
			
			var menuArea = $("#menuArea");
			var clientHeight = document.documentElement.clientHeight;
			var offsetHeight = menuArea[0].offsetHeight;
			var scrollTop = $(document).scrollTop();
			var top = menuArea[0].style.top;

		    if (scrollTop < offsetHeight - clientHeight) {
		    	menuArea.css({top : '-' + scrollTop + 'px'});
		    }
		}); */

		$(document).on('click', '#menuList .menu-photo', function(e){
			//删除原来的内容
			$('#gallery').html('');
			$('body').removeClass("background"); 
			$("#toTop").css({'display': 'none'});
			var menuId = $(e.target).attr('menuId');
	    	loadPhoto(parseInt(menuId), 1, true);
	    });
		$(document).on('click', '.text-show', function(e){
			$('body').addClass("background"); 
			var menuId = $(e.target).attr('menuId');
			var url = $(e.target).attr('url');
			if (url){				
	    		loadSubPage(parseInt(menuId), url);
			}
	    });
	});
	
	function loadMenu() {
		$.ajax({
			type: "GET",
			url: getRootPath(true) + "/menu/getMenuItems",
			data: {},
	        dataType : "jsonp",
	        jsonp: "callback",//服务端用于接收callback调用的function名的参数  
			success: function(data){
				if (data.success){
					var menuList = data.data;
					document.menuList = menuList;
					for (var i = 0; i < menuList.length; i++) {
						obj = menuList[i];
						var li = $('<div class="menu"></div>');
						var alink = $('<a class="menu-photo" href="javascript:void(0);"></a>');
						alink.attr('menuId', obj.id);
						alink.html(obj.name);
						alink.href = obj.href;
						alink.appendTo(li);
						li.appendTo($('#menuList'));
					}

					addUploadArea();
				}
			}
		});
		
		$.ajax({
			type: "GET",
			url: getRootPath(true) + "/user/loginStatus",
			data: {},
			dataType: "text",
			success: function(text){
				if (text && text == "true"){					
					$('#toUpload').html("<img src='../fancyBox/demo/addPic.gif'><span>传图片</span>");
				}
			}
		});
		
	}
</script>

<script type="text/javascript">

	$(document).ready(function() {
		
		var floatBar = $("#floatBar");
		var top = (document.documentElement.clientHeight - floatBar[0].offsetHeight)/2 + 'px';
		floatBar.css({top: top});

		//滚动时，加载图片事件
		$('#rigthPart').scroll(function() {
			$("#toTop").css({'display': 'block'});

			//open:新事件可以进来, wait:等待执行, cached：缓存事件到指定时间后, execute：执行加载照片方法
			if (document.scrollPhotoEventStatus && (document.scrollPhotoEventStatus != 'open')){
				return;
			}
			document.scrollPhotoEventStatus = 'wait';
			
			//如果滚动距离加500大于图片加载长度位置，才可以加载下一页的图片
			var scrollTop = $('#rigthPart').scrollTop();
			var shortH = document.shortestHeight;
			if (shortH && (scrollTop + 500) < shortH) {
				document.scrollPhotoEventStatus = 'open';
				return;
			}
			
			//如果要加载的页数大于图片总页数，就不再加载
			if (document.totalPage && document.loadedPhotoPageNum >= document.totalPage){
				document.scrollPhotoEventStatus = 'open';
				return;
			}
			
			//有效的滚动加载时间必须距上次三秒以上，三秒内只能缓存一个事件请求
			var time1 = document.preLoadPhotoScrollTime;
			var time2 = new Date().getTime();
			var diff = parseInt(time2) - parseInt(time1);
			var waitTime = 3000 - diff;
			
			if (time1 && waitTime > 0){
				if (document.scrollPhotoEventStatus == 'wait'){
					document.scrollPhotoEventStatus = 'cache';
				} else {					
					document.scrollPhotoEventStatus = 'open';
					return;
				}
			}
			document.preLoadPhotoScrollTime = time2;
			
			setTimeout(function(){
				document.scrollPhotoEventStatus = 'execute';
	
				//阻塞线程，直到上一批图片加载完成
				blockThread(function(){
					return document.loadPhotoLocked == false;
				});
				
				//调用加载图片方法
				var menuId = document.loadedPhotomenuId;
				loadPhoto(menuId, ++document.loadedPhotoPageNum, false);
	
				//阻塞线程，直到本批次图片加载完成，再更新滚动事件锁状态，并更新滚动时间
				blockThread(function(){
					return document.loadPhotoLocked == false;
				});
				
				document.scrollPhotoEventStatus = 'open';
			}, waitTime > 0 ? waitTime : 0);
		});
		
		$('#floatBar').mouseover(function(){
			$('#floatBar').css({right: '0px'});
		});
		$('#floatBar').mouseout(function(){
			$('#floatBar').css({right: '-42px'});
		});
		$('.barBlock').mouseover(function(){
			$(this).css({cursor:'pointer', backgroundColor: '#0AD'});
		});
		$('.barBlock').mouseout(function(){
			$(this).css({cursor:'pointer', backgroundColor: '#AEB2BD'});
		});
		$('#toTop').click(function(){
			$("#rigthPart").animate({scrollTop: 0}, 'fast');
        });
		$('#toUpload').click(function(){
			var uploadPic = $("#uploadPic");
			if (uploadPic.css("display") == 'block'){
				uploadPic.animate({left: '3000px'}, 'fast', function(){
					uploadPic.css({display: 'none'});
				});
			} else {				
				uploadPic.css({display: 'block'});
				uploadPic.animate({left: '300px'}, 'fast');
			}
        });
			
		$(document).on('change', '.uploadFile', function(e){
			var menuId = $(this).siblings('.selectMenu').val();
			if (!menuId) {
				alert('请先选择菜单');
				return;
			}
			
			var order = $(this).parent().parent().children().index($(this).parent());
			
			//显示上传进度状态div
			var uploadFile = $(e.target);
       		var uploadStatus = $(e.target).parent().find('.uploadBotton');
       		uploadStatus.css({display:"block"});
       		
       		//uploadOrder参数要放在请求头上，不然文件上传前取不到值
       		fileUploadWithProgress({
       			url: getRootPath(true) + '/pic/upload?uploadOrder=' + order,  
		    	data: {menuId:parseInt(menuId), uploadOrder:order},
       			progressUrl: getRootPath(true) + "/uploadFileProgress", 
       		 	progressParam: {uploadOrder: order},
       		 	deleteUrl: getRootPath(true) + "/", 
       		 	deleteParam: {},
       		 	spaceDiv: uploadStatus,
       		 	spaceWidth:'140px',
       		 	getResultFn:function(data){
       		 		return data.success;},
       		 	getFileNameFn: function (data, status) {
       		 		var fileName = '';
       		 		if (data.success && data.data.length > 0){
	       		 		var result = data.data[0];
	       		 		if (result.success && typeof result.value == 'string') {
	       		 			fileName = result.value;
	       		 		}
       		 		}
       		 		return fileName;
       		 	}, 
		        secureuri: false,
		        dataType:'json',
		        fileElementId: e.target.id,                        
		        success: function (data, status) { 
		        	//去除表单选择数据
		        	 uploadFile.after(uploadFile.clone().val("")); 
		        	 uploadFile.remove();
		        }
       		});
        });
		
		var url = $('img[class*="text-show"]').attr('url');
		loadSubPage(null, url);
		
		$('.fancybox').each(function() {
			var img = $(this).find('img')[0];
			this.href = img == null ? '' : img.src;
		});
		$('.fancybox').fancybox();
	});
	
	function getPictureData(){
		return pictures;
	}
	
	function loadSubPage(menuId, url){
		$("#toTop").css({'display': 'none'});
		$.ajax({
			type: "GET",
			url: getRootPath(true) + "/menu/loadSubPage",
			data: {url: encodeURI(url)},
			dataType: "text",
			success: function(text){
				if (text){
					$('#gallery').html(text);
				}
			}
		});
	}
	
	function loadPhoto(menuId, page, firstLoad){
		document.loadPhotoLocked == true;
		$.ajax({
			type: "GET",
			url: getRootPath(true) + "/pic/getPicByMenuId",
			data: {menuId: menuId, page: page},
			dataType: "jsonp",
	        jsonp: "callback",//服务端用于接收callback调用的function名的参数  
			success: function(data){
				
				//第一次加载时
				if (firstLoad) {
					if (data.success){
						//竖排
						if (data.data.sort == 0) {
							var colWidth = parseInt(100 / data.data.colNum) + '%';
		
							for (var i = 0; i < data.data.colNum; i++) {
								var column = $('<div></div>');
								column.addClass('column');
								column.width(colWidth);
								column.appendTo($('#gallery'));
							}
						}
						//横排
						if (data.data.sort == 1) {
							var ul = $('<div class="quer"></div');
							ul.appendTo($('#gallery'));
						}
		        	} else{
	        			alert('没有找到内容');
		        	} 
				}
				
				if (data.success){
					
					if (data.data.iconList && data.data.iconList.length > 0) {	
						//根据查询数据，加载图片
						loadPhotoByData(data.data);
						
						//保存/更新page和menuId和loadedPhotoPageNum到document，以便滚动时调用
						document.loadedPhotomenuId = menuId;
						document.totalPage = data.data.totalPage;
						document.loadedPhotoPageNum = page;
						
						var scrollTop = $('#rigthPart').scrollTop();
						var shortH = document.shortestHeight;
					
						//如果图片不够滚动，加载下一页图片，（滚动条的滚动距离加屏幕距离大于shortH）
						if (scrollTop + document.documentElement.clientHeight >= shortH) {
							loadPhoto(menuId, ++page, false);
						} else {
							//图片加载结束，解锁
							document.loadPhotoLocked = false;
						}
					}
				}
			}
		});
	}
	
	function loadPhotoByData(gallery){
		
		var pictures = gallery.iconList;
		if (gallery.sort == 0){			
			for (var i = 0; i < pictures.length; i++) {
				if (!(pictures[i].pictureSrc && pictures[i].src)){
					continue;
				}
				var col = $('.column');
				var index = getShortestCol(col);
				col = $(col[index]);
				
				var li = $('<div class="gallery-item"></div>');
	
				var a = $('<a class="fancybox"></a>');
				a.attr('href', pictures[i].pictureSrc);
				a.attr('data-fancybox-group', 'gallery');
	
				var img = $('<img/>');
				img.addClass('icon');
				img.css({width: col.width()});
				img.attr('src', pictures[i].src);
				
				img.appendTo(a);
				a.appendTo(li);
				li.appendTo(col);
			}
		} else if (gallery.sort == 1){
			var quer = $('#gallery .quer');
			for (var i = 0; i < pictures.length; i++) {
				if (!(pictures[i] && pictures[i].pictureSrc && pictures[i].src)){
					continue;
				}
				var li = $('<div class="gallery-item-h"></div>');
				
				var a = $('<a class="fancybox"></a>');
				a.attr('href', pictures[i].pictureSrc);
				a.attr('data-fancybox-group', 'gallery');
	
				var img = $('<img class="icon-h" />');
				var querHeight = parseInt(document.documentElement.clientHeight / gallery.querNum);
				img.css({height: querHeight});
				img.attr('src', pictures[i].src);
				
				img.appendTo(a);
				a.appendTo(li);
				li.appendTo(quer);
				
				document.shortestHeight = li[0].offsetTop;
			}
		}
	}
	
	function getShortestCol (array) {
		var index = 0;
		for (var i = 0; i < array.length; i++){
			var iHeight = parseInt(array[i].offsetHeight);
			var indexHeight = parseInt(array[index].offsetHeight);
			if (iHeight < indexHeight) {
				index = i;
				document.shortestHeight = iHeight;
			}
		}
		return index;
	}
	
	function addUploadArea(){
		//删除添加操作块区
		$('#uploadPic .uploadItem.addItem').remove();
		
		var uploadItem = $('<div class="uploadItem"></div>');
		var select = $('<select class="selectMenu"></select>');
		var file = $('<input type="file" class="uploadFile" name="files" size="0" />');
		var uploadBotton = $('<div class="uploadBotton" href="javascript:void(0);">上传照片</div>');
		var status = $('<div class="uploadStatus"></div>');
		
		var menuList = document.menuList;
		$("<option></option>").val(null).text('请选择').appendTo(select);
		for (var i = 0; i < menuList.length; i++) {
			$("<option></option>").val(menuList[i].id).text(menuList[i].name).appendTo(select);
		}
		
		file.attr('id', 'uploadForm' + new Date().getTime());
		status.css({display:"none", color:"red"});
		
		select.appendTo(uploadItem);
		file.appendTo(uploadItem);
		uploadBotton.appendTo(uploadItem);
		status.appendTo(uploadItem);
		uploadItem.appendTo($('#uploadPic'));
		
		//添加上传块
		if ($('#uploadPic .uploadItem').length < 8){		        			
			var addItem = $('<div class="uploadItem addItem"></div>');
			var addBotton = $('<a class="addBotton" href="javascript:void(0);"><img style="width:120px; height:120px;" src="../fancyBox/demo/add.jpg"></a>');
			addItem.append(addBotton);
			$('#uploadPic').append(addItem);
			
			addBotton.on('click', function(e){
				addUploadArea();
			});
		}
	}
	
</script>

</head>

<body class="background">

	<div id="container">
	
		<!-- 菜单悬浮栏 -->
		<div id="menuArea" class="menuArea">
			<div>
				<img class="menu-header text-show" src="../img/head-icon.png" url="../summary.html">
			</div>
			
			<div id="menuList">
			</div>
				<div class="menu"><a class="text-show" url="../rentRoom.html">摄影棚出租</a></div>
			
			<div id="menu-tail">
				<!-- <div class="menu"><a class="text-show" url="../contactMe.html">联系我们</a></div> -->
				<div class="menu">
					<a>联系我们</a>
					<p class="line" >地址：南京市白下区御道街58号</p>
					<p class="line" >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;明御大厦401室</p>
					<p class="line">电话：15951635982</p>
					<p class="line">QQ：610984636</p>
				</div>
				<img class="menu-weixin-scale" src="../img/weixin-scale.jpg">
				<div id="copyright"><span>Copyright © 南京新蜂商业摄影 </span></div>
			</div>
		</div>

		<!-- 图片显示 -->
		<div id="rigthPart">
			<div id="gallery"></div>
		</div>
		
		
		<!-- 右边悬浮栏 -->
		<div id="floatBar">
			<div id='toTop' class='barBlock' style='display:none;'>
				<img src='../fancyBox/demo/toTop.gif'>
				<span>回顶部</span>
			</div>
			<div id='toUpload' class='barBlock'>
			</div>
		</div>
		
		<!-- 上传图片层 -->
		<div id="uploadPic"></div>
		
	</div>
 <div style="display:none">
南京商业摄影- 新蜂商业摄影-南京新锐摄影工作室，工作室拥有两百平米专业商业摄影棚，全画幅数码单反，红圈专业镜头， 完整的闪光灯系统，承接各类商业摄影，产品静物，珠宝摄影，服装画册，建筑摄影，空间摄影，样板房摄影， 淘宝摄影，美食菜谱摄影，图片后期等业务，新蜂服装客户的目标是：精确布光，完美呈现

Keywords:
<a href="http://www.xinfengstudio.com/sitemap.html" title="南京商业摄影" target="_blank"><strong>南京商业摄影</strong></a> 

<a href="http://www.xinfengstudio.com/sitemap.xml" title="南京商业摄影" target="_blank"><strong>南京商业摄影</strong></a> 

</div>
</body>
</html>